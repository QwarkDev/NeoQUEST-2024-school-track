<h1>notes_in_the_library</h1>

<h2>Задание:</h2>
<p>Где это я? Что за странный город? Неужели то здание было порталом? Вокруг бьют молнии, дождь и ветер шумят, на холме возвышается замок. Жутковатое ощущение. Я словно бы попал в средневековый город, все жители которого вымерли… Может быть, мне снится сон? Да, наверняка. Не может же всё быть реальность. Я вообще в магию не верю. Наверное, просто упал и ударился головой. Ладно, если всё только выдумка, прогуляюсь до замка. Не стоять же на месте.</p>
<p>С трудом дошел до замка на холме. Встретил нескольких людей, но они даже не взглянули на меня! И двигались странно, как тени. Весь вымок. Без сил дернул на себя ближайшую дверь. Да есть тут хоть кто-то способный мне прояснить ситуацию? Хотя, честно говоря, мне уже всё равно. В камине горит огонь. Я смогу возле него погреться. Эта пыльная комната – видимо, библиотека. Очень хочется домой, в наш мир. Может, эти записки одскажут мне, как вернуться?</p>

<h2>Описание:</h2>
<p>Данное задание представляет собой приложение, в котором пользователь может создавать, сохранять и скачивать собственные заметки в текстовом виде. Каждому участнику необходимо пройти регистрацию, чтобы в дальнейшем войти в свой собственный аккаунт. Данное приложение уязвимо для атаки типа path traversal, позволяющей злоумышленнику получать несанкционированный доступ к файлам и папкам системы. Целью задания является получение логина и пароля администратора.</p>

<img width="1470" alt="image1" src="https://github.com/QwarkDev/NeoQuest_2024_school_track/assets/160727310/92adcd40-84c9-4ca6-a53d-c491cc7928c4">

<h2>Решение:</h2>
<b>Шаг 1:</b> <span>Каждому участнику необходимо зарегистрироваться в приложении, чтобы иметь возможность тестировать основной функционал.</span><br><br>
<b>Шаг 2:</b> <span> Участник должен заметить при скачивании файла передачу на сервер get-параметра, содержащего имя файла, который необходимо скачать.</span><br><br>

<div align="center"><a href="#">http://localhost:1636/notes.php?download=note0.txt</a></div><br>

<p>Лучше всего использовать BurpSuite для более удобного раскручивания этой уязвимости. Для этого можно использовать BurpProxy и Intercepter.</p>

<b>Шаг 3:</b> <span>Участнику необходимо перехватить запрос на скачивание файла и попробовать изменить get-параметр и для удобства открыть его в Repeater.</span>

<img width="999" alt="image2" src="https://github.com/QwarkDev/NeoQuest_2024_school_track/assets/160727310/6c588422-bfa4-4685-bc4c-d6c76fc7ca8e">

<p>Далее участнику необходимо подставить login.php вместо note1.txt и вывести его исходный код. Для этого нужно несколько раз выйти из директорий и таким образом обратиться к login.php.</p>

<img width="999" alt="image3" src="https://github.com/QwarkDev/NeoQuest_2024_school_track/assets/160727310/11c3ebf8-381e-48ad-b743-ad4372e213f6">

<b>Шаг 4:</b> <span>В данном ответе участник может заметить что идет обращение к базе данных по адресу /static/instance/database.db. Далее необходимо обратиться к файлу базы данных через path traversal и вывести его содержимое.</span>

<img width="999" alt="image4" src="https://github.com/QwarkDev/NeoQuest_2024_school_track/assets/160727310/f60e6da7-1a08-48a3-8c71-1b448f26c499">

<p>Тут можно увидеть что существуют два пользователя и рядом с ними находятся их пароли в формате sha512. Участник может расшифровать пароли через hashcat или онлайн инструменты для подбора пароля.</p>

<img width="999" alt="image5" src="https://github.com/QwarkDev/NeoQuest_2024_school_track/assets/160727310/a85260cd-48af-4931-b47d-c78466c92758">

<p>Таким образом можно узнать пароль от администратора и войти в его аккаунт. Далее нужно просто скачать заметку с именем “fl4g.txt”, которая доступна только админу.</p>

<img width="999" alt="image6" src="https://github.com/QwarkDev/NeoQuest_2024_school_track/assets/160727310/f596aeb4-4c44-4542-aeaa-7d670b047a12">
