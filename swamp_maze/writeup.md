<h1>swamp_maze</h1>

<h4>Задание:</h4>
<p>Слышу крик ведьмы. Кажется, я победил ее стража. Иду вперед, продираюсь, словно через болота. Вдалеке вижу свет и небольшой домик.  – Ты не сможешь попасть туда, – шипит ведьма. Вокруг меня вырастает лабиринт. Темные ветви мертвых деревьев путаются под ногами, пытаются обвить мои руки. – Это самое защищенное место в вотчине ведьмы, – слышу в своей голове шепот мага, – Там она хранит секрет своей силы. Иди вперед. Будь осторожен. Еще ни один человек не смог пройти лабиринт. Если умрешь, я не смогу вытащить тебя обратно. А если спасешься, то сразу окажешься в замке. И я смогу вернуть тебя в твой мир. Спасибо, старик. Твои советы очень бодрят. Всегда мечтал умереть в болоте.</p>

<h4>Описание:</h4>
<p>Пользователю предоставляется интерфейс для взаимодействия с лабиринтом:</p>
<img width="1470" alt="image1" src="https://github.com/QwarkDev/NeoQuest_2024_school_track/assets/160727310/6263a366-66d9-4e9c-bed8-000ee13b22c4">
<p>В самом начале пишется строка с подсказкой, подсказка заключается в слове “северо-восток”, которые указывают на тип генерации лабиринта.</p>

<li>1-й пункт меню покажет удобочитаемую картинку лабиринта:</li>
<img width="470" alt="image2" src="https://github.com/QwarkDev/NeoQuest_2024_school_track/assets/160727310/488b72f4-253d-4b61-b3bb-c8960925a65e">
<p>Зелёной собачкой “@” отображается текущее положение игрока.<br>
Красной решёткой “#” отображается выход из лабиринта.</p>

<li>2-й пункт меню покажет список стенок в json формате, в виде двумерной матрицы списков, где каждый из списков содержит четыре аргумента, как существование стенки: сверху, справа, снизу, слева.</li>
<img width="470" alt="image3" src="https://github.com/QwarkDev/NeoQuest_2024_school_track/assets/160727310/a6e17b32-5e58-4156-b0f6-9a0bae5ea5f4">

<li>3-й пункт даёт возможность походить, если попытка удачная, то будет возвращено “Ok”, если ход идёт в стену - то вернётся “Error”, если невозможная команда, то “Неверный тип хода”.</li>
<img width="470" alt="image4" src="https://github.com/QwarkDev/NeoQuest_2024_school_track/assets/160727310/44231b09-2362-4a50-b621-bedf69673809"><br>
<img width="470" alt="image5" src="https://github.com/QwarkDev/NeoQuest_2024_school_track/assets/160727310/6fe6fee4-4a75-48f7-bf98-2990a6636972"><br>
<img width="470" alt="image6" src="https://github.com/QwarkDev/NeoQuest_2024_school_track/assets/160727310/0a9b7798-99b2-4ad8-9657-812de81758a4">

<li>4-й пункт выводит количество пройденных лабиринтов.</li>
<li>5-й пункт выводит позицию игрока.</li>
<li>0-й пункт — выход из приложения.</li>

<h4>Решение:</h4>
<p>Для решения проще всего использовать python и библиотеку pwntools. Она обеспечивает простоту подключения к удалённому процессу и взаимодействие с ним. Среди алгоритмов прохождения лабиринта можно выделить правило правой руки, где надо идти прямо, и при возможности всегда поворачивать направо. Однако для данной генерации есть алгоритм проще и быстрее. Здесь следует идти в правый верхний угол, а как только он достигается, то идти влево до конца, там и будет выход из лабиринта.
Пример кода:</p>

<pre lang="python">
<code>
from pwn import *
con = remote("127.0.0.1", 1337) # Подключение к серверу
s = ""
while not s.endswith(">> "):
	s = con.read().decode()
	print(s) # Читаем до запроса программой команды
'''
con.sendline(b"1")
s = ""
while not s.endswith(">> "):
	s = con.read().decode()
	print(s)
''' # Запрос на показ лабиринта, нужен для отладки, но далее только тормозит работу, поэтому можно убрать    
for i in range(3):         	 
	errors = [0, 0] # Ошибки при движении вправо и вверх
	s = ""
	while "End" not in s:
    	'''
    	con.sendline(b"1")
    	s = ""
    	while not s.endswith(">> "):
        	s = con.read().decode()
        	print(s)
    	''' # Запрос на показ лабиринта, нужен для отладки, но далее только тормозит работу, поэтому можно убрать
    	con.sendline(b"3") # Запрашиваем попытку хода
    	s = ""
    	while not s.endswith(">> "):
        	s = con.read().decode()
        	print(s) # Читаем до запроса программой направления
    	if not errors[1]:
        	con.sendline(b"N")
        	ans = con.readline().decode().strip() # Сделали попытку сдвинуться вверх и читаем ответ
        	if ans == "Ok":
            	errors = [0, 0] # Если смогли походить, то может открыться и путь вправо, если был заблокирован
        	else:
            	errors[1] = 1 # Вписываем ошибку, что не смогли вверх походить
    	elif not errors[0]:
        	con.sendline(b"E")
        	ans = con.readline().decode().strip() # Сделали попытку сдвинуться вправо и читаем ответ
        	if ans == "Ok":
            	errors = [0, 0] # Если смогли походить, то может открыться и путь вверх, если был заблокирован
        	else:
            	errors[0] = 1 # Вписываем ошибку, что не смогли вправо походить
    	else:
        	con.sendline(b"W") # Если ошибка при ходе вправо и вверх, то мы в верхнем правом углу, а значит прямой путь влево приведёт к выходу из лабиринта
    	s = ""
    	while not s.endswith(">> "):
        	s = con.read().decode()
        	print(s) # Читаем данные, либо будет ответ после сдвига, либо сообщение о прохождении этапа, в конце последнего также напечатает флаг
   	 
con.interactive() # Переход в режим ручного взаимодействия, нужен, если программа только пишется и отлаживается
</code>
</pre>


